<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-otplib.html">otplib</a></li><li><a href="module-otplib-authenticator.html">otplib-authenticator</a></li><li><a href="module-otplib-authenticator_Authenticator.html">otplib-authenticator/Authenticator</a></li><li><a href="module-otplib-authenticator_check.html">otplib-authenticator/check</a></li><li><a href="module-otplib-authenticator_decodeKey.html">otplib-authenticator/decodeKey</a></li><li><a href="module-otplib-authenticator_encodeKey.html">otplib-authenticator/encodeKey</a></li><li><a href="module-otplib-authenticator_keyuri.html">otplib-authenticator/keyuri</a></li><li><a href="module-otplib-authenticator_token.html">otplib-authenticator/token</a></li><li><a href="module-otplib-browser.html">otplib-browser</a></li><li><a href="module-otplib-browser_crypto.html">otplib-browser/crypto</a></li><li><a href="module-otplib-browser_randomBytes.html">otplib-browser/randomBytes</a></li><li><a href="module-otplib-core.html">otplib-core</a></li><li><a href="module-otplib-core_hotpCheck.html">otplib-core/hotpCheck</a></li><li><a href="module-otplib-core_hotpCounter.html">otplib-core/hotpCounter</a></li><li><a href="module-otplib-core_hotpDigest.html">otplib-core/hotpDigest</a></li><li><a href="module-otplib-core_hotpOptions.html">otplib-core/hotpOptions</a></li><li><a href="module-otplib-core_hotpSecret.html">otplib-core/hotpSecret</a></li><li><a href="module-otplib-core_hotpToken.html">otplib-core/hotpToken</a></li><li><a href="module-otplib-core_totpCheck.html">otplib-core/totpCheck</a></li><li><a href="module-otplib-core_totpCounter.html">otplib-core/totpCounter</a></li><li><a href="module-otplib-core_totpOptions.html">otplib-core/totpOptions</a></li><li><a href="module-otplib-core_totpSecret.html">otplib-core/totpSecret</a></li><li><a href="module-otplib-core_totpToken.html">otplib-core/totpToken</a></li><li><a href="module-otplib-hotp.html">otplib-hotp</a></li><li><a href="module-otplib-hotp_HOTP.html">otplib-hotp/HOTP</a></li><li><a href="module-otplib-totp.html">otplib-totp</a></li><li><a href="module-otplib-totp_TOTP.html">otplib-totp/TOTP</a></li><li><a href="module-otplib-utils.html">otplib-utils</a></li><li><a href="module-otplib-utils_hexToInt.html">otplib-utils/hexToInt</a></li><li><a href="module-otplib-utils_intToHex.html">otplib-utils/intToHex</a></li><li><a href="module-otplib-utils_isSameToken.html">otplib-utils/isSameToken</a></li><li><a href="module-otplib-utils_leftPad.html">otplib-utils/leftPad</a></li><li><a href="module-otplib-utils_padSecret.html">otplib-utils/padSecret</a></li><li><a href="module-otplib-utils_removeSpaces.html">otplib-utils/removeSpaces</a></li><li><a href="module-otplib-utils_secretKey.html">otplib-utils/secretKey</a></li><li><a href="module-otplib-utils_setsOf.html">otplib-utils/setsOf</a></li><li><a href="module-otplib-utils_stringToHex.html">otplib-utils/stringToHex</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>otplib</h1><blockquote>
<p>Time-based (TOTP) and HMAC-based (HOTP) One-Time Password library</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/v/otplib.svg?style=flat-square" alt="npm"></a>
<a href="https://circleci.com/gh/yeojz/otplib"><img src="https://img.shields.io/circleci/project/github/yeojz/otplib/master.svg?style=flat-square" alt="Build Status"></a>
<a href="https://coveralls.io/github/yeojz/otplib"><img src="https://img.shields.io/coveralls/yeojz/otplib/master.svg?style=flat-square" alt="Coverage Status"></a>
<a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/dt/otplib.svg?style=flat-square" alt="npm downloads"></a>
<a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md"><img src="https://img.shields.io/badge/PRs-Welcome-ff69b4.svg?style=flat-square" alt="PRs Welcome"></a></p>
<p><img width="150" src="https://yeojz.github.io/otplib/otplib.png" /></p>
<ul>
<li><a href="#about">About</a></li>
<li><a href="#demo-and-documentation">Demo and Documentation</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#in-node">In node</a><ul>
<li><a href="#using-specific-otp-implementation">Using specific OTP implementation</a></li>
<li><a href="#using-classes">Using classes</a></li>
</ul>
</li>
<li><a href="#in-browser">In browser</a><ul>
<li><a href="#browser-compatibility">Browser Compatibility</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#advanced-usage">Advanced Usage</a></li>
<li><a href="#notes">Notes</a><ul>
<li><a href="#setting-custom-options">Setting Custom Options</a><ul>
<li><a href="#available-options">Available Options</a></li>
</ul>
</li>
<li><a href="#google-authenticator">Google Authenticator</a><ul>
<li><a href="#base32-keys-and-rfc3548">Base32 Keys and RFC3548</a></li>
<li><a href="#seed-secret-length">Seed / secret length</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2>About</h2><p><code>otplib</code> is a JavaScript One Time Password (OTP) library.
It provides both functional and class based interfaces for
dealing with OTP generation and verification.</p>
<p>It implements both <a href="http://en.wikipedia.org/wiki/HMAC-based_One-time_Password_Algorithm">HOTP</a> - <a href="http://tools.ietf.org/html/rfc4226">RFC 4226</a> and <a href="http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm">TOTP</a> - <a href="http://tools.ietf.org/html/rfc6238">RFC 6238</a>, and are tested against the test vectors provided in their respective RFC specifications. These datasets can be found in the <code>packages/tests</code> folder.</p>
<ul>
<li><a href="https://github.com/yeojz/otplib/blob/master/packages/tests/rfc4226.js">RFC 4226 Dataset</a></li>
<li><a href="https://github.com/yeojz/otplib/blob/master/packages/tests/rfc6238.js">RFC 6238 Dataset</a></li>
</ul>
<p>This library is also compatible with <a href="https://github.com/google/google-authenticator">Google Authenticator</a>, and includes additional methods to allow you to work with Google Authenticator.</p>
<h2>Demo and Documentation</h2><ul>
<li><a href="https://yeojz.github.io/otplib/docs">Documentation</a></li>
<li><a href="https://yeojz.github.io/otplib">Demo</a></li>
</ul>
<h2>Installation</h2><p>Install the library via:</p>
<pre class="prettyprint source"><code>$ npm install otplib --save</code></pre><h2>Upgrading</h2><p>This library follows <code>semver</code>. As such, major version bumps usually mean API changes or behavior changes. Please check <a href="https://github.com/yeojz/otplib/wiki/upgrade-notes">upgrade notes</a> for more information, especially before making any major upgrades.</p>
<p>You might also want to check out the release notes associated with each tagged versions in the <a href="https://github.com/yeojz/otplib/releases">releases</a> page.</p>
<h2>Getting Started</h2><h3>In node</h3><pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

const secret = otplib.authenticator.generateSecret();
const token = otplib.authenticator.generate(secret);
const isValid = otplib.authenticator.check(123456, secret);

// or

const isValid = otplib.authenticator.verify({
  secret,
  token: 123456
});</code></pre><h4>Using specific OTP implementation</h4><p>If you want to include a specific OTP specification, you can import it directly:</p>
<pre class="prettyprint source lang-js"><code>import hotp from 'otplib/hotp';
import totp from 'otplib/totp';
import authenticator from 'otplib/authenticator';</code></pre><p>Do note that you'll have to provide a crypto solution (this is to allow custom crypto solutions),
as long as they implement <code>createHmac</code> and <code>randomBytes</code>. Take a look at the
<a href="https://github.com/yeojz/otplib/blob/master/packages/otplib-browser">browser implementation</a> for an example</p>
<p>i.e.</p>
<pre class="prettyprint source lang-js"><code>import authenticator from 'otplib/authenticator';
import crypto from 'crypto';
authenticator.options = {crypto}

// Or if you're using the other options
// hotp.options = {crypto}
// totp.options = {crypto}</code></pre><h4>Using classes</h4><p>For ease of use, the default exports are all instantiated instances of their respective classes.
You can access the original classes via it's same name property of an instantiated class.</p>
<p>i.e</p>
<pre class="prettyprint source lang-js"><code>
import hotp from 'otplib/hotp';
const HOTP = hotp.HOTP;

import totp from 'otplib/totp';
const TOTP = totp.TOTP;

import authenticator from 'otplib/authenticator';
const Authenticator = authenticator.Authenticator;</code></pre><h3>In browser</h3><p>A browser-targeted version has been compiled.
You'll need to add the following scripts to your code:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;otplib-browser.js&quot;>&lt;/script>

&lt;script type=&quot;text/javascript&quot;>
   // window.otplib
&lt;/script></code></pre><p>You can find it in <code>node_modules/otplib</code> after you install.</p>
<p>Alternatively you can</p>
<ul>
<li>Download from <a href="https://github.com/yeojz/otplib/tree/gh-pages/lib">gh-pages</a>.</li>
<li>Use unpkg.com</li>
</ul>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/otplib@6.0.0/otplib-browser.js&quot;>&lt;/script></code></pre><p>For a live example, the <a href="https://yeojz.github.io/otplib">project site</a> has been built using <code>otplib-browser.js</code>. The source code can be found <a href="https://github.com/yeojz/otplib/tree/master/site">here</a>.</p>
<h4>Browser Compatibility</h4><p>In order to reduce the size of the browser package, the <code>crypto</code> package has been replaced with a alternative implementation. The current implementation depends on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a> and the browser's native <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto">crypto</a> methods, which may only be available in recent browser versions.</p>
<p>To find out more about the replacements, you can take a look at <code>packages/otplib-browser/crypto.js</code></p>
<p><strong>Output sizes:</strong></p>
<ul>
<li>with node crypto: ~311Kb</li>
<li>with alternative crypto: ~96Kb</li>
</ul>
<h2>Advanced Usage</h2><p>This library is primarily a node module (cjs), with a umd browser package provided.</p>
<table>
<thead>
<tr>
<th>file</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-authenticator.html">authenticator.js</a></td>
<td>Google Authenticator bindings</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-browser.html.html">browser.js</a></td>
<td>Browser compatible package built with webpack</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-core.html">core.js</a></td>
<td>Provides all functional parts of the library</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-hotp.html">hotp.js</a></td>
<td>Wraps the functional core into a instantiated HOTP class</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib.html">otplib.js</a></td>
<td>Entry file for this library</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-totp.html">totp.js</a></td>
<td>Wraps the functional core into a instantiated TOTP class</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-utils.html">utils.js</a></td>
<td>Helper utilities</td>
</tr>
</tbody>
</table>
<p>For more information about the functions and available files, check out the <a href="https://yeojz.github.io/otplib/docs">documentation</a>.</p>
<h2>Notes</h2><h3>Setting Custom Options</h3><p>All instantiated classes will have their options inherited from their respective options generator. i.e. HOTP from <code>hotpOptions</code> and TOTP/Authenticator from <code>totpOptions</code>.</p>
<p>All OTP classes have an object setter and getter method to override these default options.</p>
<p>For example,</p>
<pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

// setting
otplib.authenticator.options = {
   step: 30
}

// getting
const opts = otplib.authenticator.options;</code></pre><h4>Available Options</h4><table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Defaults</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>algorithm</td>
<td>string</td>
<td>'sha1'</td>
<td>Algorithm used for HMAC</td>
</tr>
<tr>
<td>createHmacSecret</td>
<td>function</td>
<td>(hotp) hotpSecret, (totp) totpSecret</td>
<td>Transforms the secret and applies any modifications like padding to it.</td>
</tr>
<tr>
<td>crypto</td>
<td>object</td>
<td>node crypto</td>
<td>Crypto module to use.</td>
</tr>
<tr>
<td>digits</td>
<td>integer</td>
<td>6</td>
<td>The length of the token</td>
</tr>
<tr>
<td>epoch (totp)</td>
<td>integer</td>
<td>null</td>
<td>starting time since the UNIX epoch (seconds). <em>Note</em> non-javascript epoch. i.e. <code>new Date().getTime() / 1000</code></td>
</tr>
<tr>
<td>step (totp)</td>
<td>integer</td>
<td>30</td>
<td>Time step (seconds)</td>
</tr>
</tbody>
</table>
<h3>Google Authenticator</h3><h4>Base32 Keys and RFC3548</h4><p>Google Authenticator requires keys to be base32 encoded.
It also requires the base32 encoder to be <a href="http://tools.ietf.org/html/rfc3548">RFC 3548</a> compliant.</p>
<p>OTP calculation will still work should you want to use other base32 encoding methods (like Crockford's Base 32) but it will NOT be compatible with Google Authenticator.</p>
<pre class="prettyprint source lang-js"><code>import authenticator from 'otplib/authenticator';

const secret = authenticator.generateSecret(); // base 32 encoded hex secret key
const token = authenticator.generate(secret);</code></pre><h4>Seed / secret length</h4><p>In <a href="http://tools.ietf.org/html/rfc6238">RFC 6238</a>, the secret / seed length for different algorithms is predefined:</p>
<pre class="prettyprint source"><code>HMAC-SHA1 - 20 bytes
HMAC-SHA256 - 32 bytes
HMAC-SHA512 - 64 bytes</code></pre><p>As such, the length of the secret is padded and sliced according to the expected length for respective algrorithms.</p>
<h2>Contributing</h2><ul>
<li>Check out: <a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></li>
</ul>
<h2>License</h2><p><code>otplib</code> is <a href="./LICENSE">MIT licensed</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Sep 02 2017 23:11:19 GMT+0800 (+08) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>